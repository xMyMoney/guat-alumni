<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zwx.guatalumni.module.alumni.dao.AlumniMapper">

    <select id="getTotal" resultType="java.lang.Integer">
        select count(a.id)
        from alumni a left join major ma on(a.major_id = ma.id)
                      left join academy ac on(a.academy_id = ac.id)
        where is_delete = 0
        <if test="username != '' and username != null">
            and username like concat('%',#{username},'%')
        </if>
        <if test="stuId != '' and stuId != null">
            and stu_id = #{stuId}
        </if>
        <if test="endYear != '' and endYear != null">
            and end_year  = #{endYear}
        </if>
        <if test="star != '' and star != null">
            and star = #{star}
        </if>
        <if test="status != '' and status != null">
            and status = #{status}
        </if>
    </select>
    <select id="getList" resultType="com.zwx.guatalumni.module.alumni.model.vo.AlumniListVo">
        select a.id, a.username, a.stu_id, a.education,
               ac.name as academy, ma.name as major,a.end_year,a.star, a.`status`
        from alumni a left join major ma on(a.major_id = ma.id)
                      left join academy ac on(a.academy_id = ac.id)
        where is_delete = 0
        <if test="username != '' and username != null">
            and username like concat('%',#{username},'%')
        </if>
        <if test="stuId != '' and stuId != null">
            and stu_id like concat('%',#{stuId},'%')
        </if>
        <if test="endYear != '' and endYear != null">
            and end_year  = #{endYear}
        </if>
        <if test="star != '' and star != null">
            and star = #{star}
        </if>
        <if test="status != '' and status != null">
            and status = #{status}
        </if>
        limit #{current},#{pageSize}
    </select>
</mapper>
